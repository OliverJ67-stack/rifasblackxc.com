<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Rifas Black</title>

<style>
body {
  margin: 0;
  font-family: 'Arial Black', Arial, sans-serif;
  background: url("fondo-ruleta.jpg") center/cover no-repeat fixed;
  color: white;
  text-align: center;
}

.overlay {
  background: rgba(0,0,0,0.78);
  min-height: 100vh;
  padding-bottom: 40px;
}

header {
  padding: 30px 10px;
}

header img {
  width: 200px;
  cursor: pointer;
}

.subtitle {
  margin-top: 15px;
  font-size: 42px;
  font-weight: bold;
  color: #ffffff; /* ‚Üê CAMBIO √öNICO */
  text-shadow: 0 0 12px #ffffff, 0 0 25px black;
  letter-spacing: 3px;
}

.container {
  max-width: 850px;
  margin: auto;
  padding: 20px;
}

select, button {
  padding: 14px;
  font-size: 17px;
  margin: 8px;
  border-radius: 10px;
  border: none;
}

button {
  background: linear-gradient(90deg, #b30000, #ff1e1e);
  color: white;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 0 12px black;
}

button:hover {
  transform: scale(1.05);
}

.grid {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 12px;
  margin-top: 25px;
}

.num {
  background: #111;
  border: 2px solid #ff1e1e;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 18px;
}

.num.selected {
  background: #ff1e1e;
}

.result {
  margin-top: 30px;
  font-size: 26px;
  line-height: 1.8;
  text-shadow: 0 0 10px black;
}

.spin {
  font-size: 38px;
  font-weight: bold;
  color: #ff2b2b;
  text-shadow: 0 0 15px black;
  animation: blink 0.15s infinite;
}

@keyframes blink {
  50% { opacity: 0.5; }
}
</style>
</head>

<body>
<div class="overlay">

<header>
  <img src="rifaslogo.png" id="logo">
  <div class="subtitle">RIFAS ENTRE AMIGOS</div>
</header>

<div class="container">

<h2>Selecciona el rango de la rifa</h2>

<select id="range">
  <option value="">-- Selecciona --</option>
  <option value="10">1 - 10</option>
  <option value="20">1 - 20</option>
  <option value="30">1 - 30</option>
  <option value="40">1 - 40</option>
  <option value="50">1 - 50</option>
  <option value="60">1 - 60</option>
  <option value="70">1 - 70</option>
  <option value="80">1 - 80</option>
  <option value="90">1 - 90</option>
  <option value="100">1 - 100</option>
</select>

<br>
<button onclick="mostrarNumeros()">Mostrar n√∫meros</button>
<button onclick="seleccionarTodos()">Seleccionar todos</button>

<div class="grid" id="grid"></div>

<br>
<button onclick="generarTombola()">üé± Generar T√≥mbola</button>

<div class="result" id="resultado"></div>

</div>
</div>

<script>
let numeros = [];
let premioMayorFijo = null;

// TRUCO OCULTO
document.getElementById("logo").addEventListener("click", () => {
  const n = prompt("N√∫mero ganador del PREMIO MAYOR:");
  if (n && !isNaN(n) && n > 0) premioMayorFijo = parseInt(n);
});

function mostrarNumeros() {
  const max = parseInt(document.getElementById("range").value);
  if (!max) return alert("Selecciona un rango");

  numeros = [];
  const grid = document.getElementById("grid");
  grid.innerHTML = "";

  for (let i = 1; i <= max; i++) {
    const div = document.createElement("div");
    div.className = "num";
    div.textContent = i;
    div.onclick = () => {
      div.classList.toggle("selected");
      numeros.includes(i)
        ? numeros = numeros.filter(n => n !== i)
        : numeros.push(i);
    };
    grid.appendChild(div);
  }
}

function seleccionarTodos() {
  numeros = [];
  document.querySelectorAll(".num").forEach(d => {
    d.classList.add("selected");
    numeros.push(parseInt(d.textContent));
  });
}

function generarTombola() {
  if (numeros.length < 3) {
    alert("Selecciona al menos 3 n√∫meros");
    return;
  }

  const res = document.getElementById("resultado");
  res.innerHTML = "";

  let pool = [...numeros];

  const primero = pool.splice(Math.floor(Math.random() * pool.length), 1)[0];
  const segundo = pool.splice(Math.floor(Math.random() * pool.length), 1)[0];

  let premioMayor;
  if (premioMayorFijo !== null && pool.includes(premioMayorFijo)) {
    premioMayor = premioMayorFijo;
  } else {
    premioMayor = pool.splice(Math.floor(Math.random() * pool.length), 1)[0];
  }

  function animar(texto, valor, callback) {
    let vueltas = 0;
    const linea = document.createElement("div");
    res.appendChild(linea);

    const intervalo = setInterval(() => {
      linea.innerHTML = `<span class="spin">${texto}: ${pool[Math.floor(Math.random() * pool.length)]}</span>`;
      vueltas++;

      if (vueltas > 18) {
        clearInterval(intervalo);
        linea.innerHTML = `${texto}: <b>${valor}</b>`;
        callback && callback();
      }
    }, 90);
  }

  animar("ü•â Primer n√∫mero ganador", primero, () => {
    setTimeout(() => {
      animar("ü•à Segundo n√∫mero ganador", segundo, () => {
        setTimeout(() => {
          animar("ü•á Premio mayor", premioMayor, () => {
            res.innerHTML += `<br>üéâ Felicidades a los n√∫meros ganadores`;
          });
        }, 500);
      });
    }, 500);
  });
}
</script>

</body>
</html>p