<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Rifas Black</title>

<style>
body {
  margin:0;
  font-family:'Arial Black', Arial, sans-serif;
  background:url("fondo-ruleta.jpg") center/cover no-repeat fixed;
  color:white;
  text-align:center;
}
.overlay {
  background:rgba(0,0,0,0.78);
  min-height:100vh;
}
header { padding:30px 10px; }
header img { width:200px; cursor:pointer; }

.subtitle {
  font-size:42px;
  color:white;
  text-shadow:0 0 12px white, 0 0 25px black;
  letter-spacing:3px;
}

.tab { display:none; padding:20px; }
.tab.active { display:block; }

button, select, input {
  padding:14px;
  font-size:17px;
  margin:8px;
  border-radius:10px;
  border:none;
}

button {
  background:linear-gradient(90deg,#b30000,#ff1e1e);
  color:white;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 12px black;
}
button:hover { transform:scale(1.05); }

.grid {
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:12px;
  margin-top:25px;
}

.num {
  background:#111;
  border:2px solid #ff1e1e;
  padding:16px;
  border-radius:10px;
  cursor:pointer;
}
.num.selected { background:#ff1e1e; }

.participante {
  background:#111;
  border:2px solid #ff1e1e;
  padding:15px;
  border-radius:10px;
  margin-bottom:10px;
}

.spin {
  font-size:38px;
  font-weight:bold;
  color:#ff2b2b;
  text-shadow:0 0 15px black;
  animation:blink .15s infinite;
}

@keyframes blink { 50%{opacity:.5;} }

.result {
  font-size:26px;
  margin-top:20px;
  text-shadow:0 0 10px black;
}
</style>
</head>

<body>
<div class="overlay">

<header>
  <img src="rifaslogo.png" id="logo">
  <div class="subtitle">RIFAS ENTRE AMIGOS</div>
</header>

<!-- PASO 1 -->
<div class="tab active" id="tab1">
  <h2>Paso 1 ¬∑ Selecciona n√∫meros</h2>

  <select id="range">
    <option value="">-- Selecciona rango --</option>
    <option value="10">1 - 10</option>
    <option value="20">1 - 20</option>
    <option value="30">1 - 30</option>
    <option value="50">1 - 50</option>
    <option value="100">1 - 100</option>
  </select><br>

  <button onclick="mostrarNumeros()">Mostrar</button>
  <button onclick="seleccionarTodos()">Seleccionar todos</button>

  <div class="grid" id="grid"></div><br>
  <button onclick="irRegistro()">Siguiente ‚û°</button>
</div>

<!-- PASO 2 -->
<div class="tab" id="tab2">
  <h2>Paso 2 ¬∑ Registro</h2>
  <div id="forms"></div>
  <button onclick="irTombola()">Ir a T√≥mbola üé±</button>
</div>

<!-- PASO 3 -->
<div class="tab" id="tab3">
  <h2>T√ìMBOLA</h2>
  <button onclick="generarTombola()">üé± GIRAR</button>
  <div class="result" id="resultado"></div>
</div>

</div>

<script>
let numeros=[], participantes={}, premioMayorFijo=null;

document.getElementById("logo").onclick=()=>{
  const n=prompt("N√∫mero fijo premio mayor:");
  if(n && !isNaN(n)) premioMayorFijo=parseInt(n);
};

function cambiarTab(id){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function mostrarNumeros(){
  const max=parseInt(range.value);
  if(!max) return alert("Selecciona rango");
  numeros=[]; participantes={}; grid.innerHTML="";
  for(let i=1;i<=max;i++){
    const d=document.createElement("div");
    d.className="num"; d.textContent=i;
    d.onclick=()=>{ d.classList.toggle("selected");
      numeros.includes(i)?numeros=numeros.filter(n=>n!==i):numeros.push(i);
    };
    grid.appendChild(d);
  }
}

function seleccionarTodos(){
  numeros=[];
  document.querySelectorAll(".num").forEach(d=>{
    d.classList.add("selected");
    numeros.push(parseInt(d.textContent));
  });
}

function irRegistro(){
  if(numeros.length<3) return alert("M√≠nimo 3 n√∫meros");
  forms.innerHTML="";
  numeros.forEach(n=>{
    forms.innerHTML+=`
      <div class="participante">
        <b>N√∫mero ${n}</b><br>
        <input placeholder="Nombre" oninput="guardar(${n},'nombre',this.value)">
        <input placeholder="Tel√©fono" oninput="guardar(${n},'tel',this.value)">
      </div>`;
  });
  cambiarTab("tab2");
}

function guardar(n,c,v){
  if(!participantes[n]) participantes[n]={};
  participantes[n][c]=v;
}

function irTombola(){
  cambiarTab("tab3");
}

function generarTombola(){
  resultado.innerHTML="";
  let pool=[...numeros];

  const sacar=()=>pool.splice(Math.floor(Math.random()*pool.length),1)[0];

  const primero=sacar();
  const segundo=sacar();
  const mayor=premioMayorFijo && pool.includes(premioMayorFijo)?premioMayorFijo:sacar();

  animar("ü•â Primer lugar",primero,()=>{
    animar("ü•à Segundo lugar",segundo,()=>{
      animar("ü•á PREMIO MAYOR",mayor);
    });
  });
}

function animar(titulo,num,cb){
  let vueltas=0;
  const div=document.createElement("div");
  resultado.appendChild(div);
  const inter=setInterval(()=>{
    div.innerHTML=‚Å†‚ÄØ<span class="spin">${titulo}: ${numeros[Math.floor(Math.random()*numeros.length)]}</span>‚ÄØ‚Å†;
    vueltas++;
    if(vueltas>20){
      clearInterval(inter);
      const p=participantes[num]||{};
      div.innerHTML=‚Å†‚ÄØ${titulo}: <b>${num}</b><br>üë§ ${p.nombre||""}<br>üìû ${p.tel||""}‚ÄØ‚Å†;
      cb&&setTimeout(cb,500);
    }
  },90);
}
</script>

</body>
</html>
